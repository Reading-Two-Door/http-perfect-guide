## 공부 내용

- 웹 프락시 서버는 클라이언트의 입장에서 트랜잭션을 수행하는 중개인이다.
- 공용 프락시와 개인 프락시가 있다. (개인 프락시는 흔하지 않음)
- 프락시와 게이트웨이의 차이점은 같은 프로토콜을 연결하냐 아니냐 인데 프락시가 게이트웨이 기능을 구현하기 때문에 경계가 모호하다.

### 왜 프락시를 사용하는가?

- 보안, 성능, 비용 절감
- 대리 프록시(리버스 프록시) - 실제 웹 서버인 것 처럼 위장하며 공용 콘텐츠에 대한 성능 개선을 위해 사용
- 가까운 캐시로 성능이 좋거나 필터링을 하는 컨텐츠 라우팅 프락시도 구성가능하다.

- #### 트랜스 코딩
  - 데이터의 표현 방식을 자연스럽게 변환하는 것(본문 포맷 수정)
    - GIF => JPG
    - 텍스트 파일 압축
    - 텍스트 언어 변경

<br/>

- 익명화 프락시는 클라이언트 IP주소, 헤더, 쿠키 등을 제거해서 개인 정보 보호와 익명성 보장에 기여 가능

### 프락시는 어디에 있는가?

- 어떻게 사용할지에 따라 어디든 배치 가능

#### 프락시 서버 배치

- 출구 프락시
  - 로컬 네트워크의 출구에 위치
- 접근(입구) 프락시
  - ISP 접근 지점에 위치
- 대리 프락시(리버스 프락시)
  - 네트워크의 가장 끝에 있는 웹 서버 바로 앞에 위치
  - 웹 서버로 향하는 모든 요청을 처리
- 네트워크 교환 프락시
  - 네트워크 사이 인터넷 피어링 교환 지점에 위치
  - 캐시를 이용해 네트워크 혼잡을 완화하고 트래픽 흐름 감시

#### 프락시 계층

- 프락시는 연쇄적으로 구성이 가능
- 인바운드 프락시(서버에 가까운 쪽)이 부모 아웃바운드 프락시(클라이언트에 가까운 쪽)이 자식
- 프락시 계층은 기본적으로 정적이나 항상 그렇지는 않다.
- 동적 사례
  - 부하 균형
  - 지리적 인접성에 근거한 라우팅
  - 프로토콜/타입 라우팅
  - 유로 가입자를 위한 라우팅
- 프락시가 클라이언트 트래픽을 처리하는 방법
  - 프락시를 사용하도록 클라이언트 설정
  - 트래픽을 인터셉터해서 프락시로 리다이렉트
  - 웹 서버의 리버스 프락시
  - HTTP 요청을 프락시로 리다이렉트하는 서버
- 클라이언트 프락시 설정
  - 수동 설정
    - 프락시의 호스트와 포트를 지정
    - 모든 컨텐츠에 단 하나의 프락시 서버만 지정 가능하여 유연하지 못함
    - 장애 시의 대체 작동 없음
  - 브라우저 기본 설정
  - 프락시 자동 설정(PAC)
    - 프락시 설정을 상황에 맞게 동적으로 계산해주는 작은 자바스크립트 프로그램
    - PAC 파일의 URI를 브라우저에 설정해야한다.
    - FindProxyForUrl(url,host) - 프락시 서버 계산 함수
  - WPAD 프락시 발견
    - 브라우저에 알맞은 PAC 파일을 찾아주는 알고리즘
    - 성공할 때까지 여러 발견 기법을 하나씩 시도

#### 프락시 요청의 미묘한 특징들

- 프락시를 통해 요청 시 완전한 URI를 갖는다. 프락시가 없던 시절 단일한 서버와 통신했기에 호스트 명과 포트 번호를 알고 있기에 불필요한 정보 발송을 피했다.
- 가상 호스팅에서도 동일 문제가 발생했으나 호스트와 포트에 대한 정보가 담긴 Host헤더로 문제 해결
- 리버스 프락시나 인터셉터 프락시의 경우 위의 두 방법을 시도하고 불가능한 경우 프락시에 저장된 원래 서버의 주소와 포트 번호를 확인하고 그래도 없으면 에러 메시지를 반환한다.
- 프락시가 없는 경우 호스트명은 www.000.com으로 자동확장하여 DNS에서 찾아본다.
- 명시적인 프락시의 경우 확장하지 않음
- 인터셉트 프락시일 경우 프락시에서 서버에 의해 트랜잭션이 종료 될 수 있다. 그래서 DNS 분석에 대한 장애 허용을 지원해야 하는 것이 중요

### 메시지 추적

- 오늘날 트랜잭션 시 여러 프락시를 지나는 일이 많다. 그럼에 따라 프락시를 넘나드는 메시지의 흐름 추적이 중요해짐.

#### Via 헤더

- Via헤더 필드는 메시지가 지나는 각 중간 노드의 정보를 나열
- 메시지 발송자들의 프로토콜을 다루는 능력을 알기 위해 사용
- 프락시는 자신을 가리키는 유일한 문자열을 Via헤더에 삽입하여 라우팅 루프를 체크한다.
- 프로토콜 변환 기록

#### 상호운용성

- 프락시는 이해 할 수 없는 헤더 필드는 반드시 그대로 전달해야한다.
- 같은 이름일 경우 상대적인 순서도 반드시 유지하여 전달
- OPTIONS 메서드는 서버나 웹 서버의 특정 리소스가 어떤 기능을 지원하는지를 Allow 헤더로 응답 받을 수 있다.

## 알게된 점

### audit trail

감사 추적(Audit Trail)은 컴퓨터 시스템에서 사용자의 활동을 기록하고 추적하는 것을 의미합니다. 이는 데이터 무결성, 시스템 보안, 문제 해결 등 다양한 목적으로 사용될 수 있습니다.

감사 추적에는 다음과 같은 정보가 포함될 수 있습니다:

사용자 ID: 어떤 사용자가 행동을 취했는지 식별합니다.
날짜와 시간: 행동이 언제 일어났는지 기록합니다.
종류의 작업: 사용자가 수행한 작업(예를 들어, 파일 수정, 데이터베이스 쿼리 실행 등)을 설명합니다.
작업 대상: 작업이 어떤 데이터나 시스템 구성 요소에 영향을 미쳤는지를 나타냅니다.
특정 환경에서 감사 추적은 매우 중요할 수 있습니다. 예를 들어, 금융 서비스나 의료 서비스와 같은 곳에서는 개인 정보 보호와 규정 준수를 위해 필요할 수 있으며 IT 인프라에서 문제 해결 및 성능 최적화에도 유용할 수 있습니다.

그러나 감사 추적에도 주의해야 할 점들이 있습니다. 너무 많은 로그 데이터를 생성하면 저장 공간과 처리 능력에 부담을 줄 수 있으며, 개인 정보 보호 관련 법률과 규정을 준수해야 합니다. 따라서 감사 정책은 조직의 요구 사항과 법률 준수 사항에 따라 신중하게 계획되어야 합니다.

- CDN도 프락시다.

### 프락시의 트랜스 코딩과 i18n은 어떤 관계

프록시의 트랜스코딩(Transcoding)과 국제화(i18n, Internationalization)는 웹 콘텐츠를 사용자에게 최적화하여 제공하는 데 도움이 되는 개념들입니다. 하지만 이 두 가지는 서로 다른 목적과 접근 방식을 가지고 있습니다.

1. 프록시 트랜스코딩: 프록시 서버에서 수행되는 트랜스코딩은 웹 콘텐츠의 형식을 변환하는 과정입니다. 예를 들어, 이 기능은 큰 이미지 파일을 작은 해상도로 변환하거나, 동영상 스트리밍 비트레이트를 조절하는 등의 작업에 사용될 수 있습니다. 이렇게 함으로써 네트워크 대역폭을 절약하고 사용자 경험을 개선할 수 있습니다.
2. i18n (국제화): 국제화는 소프트웨어가 다양한 언어와 문화권에서 잘 작동하도록 설계 및 개발하는 과정입니다. 이것은 문자열 추출 및 로컬라이징(localizing), 날짜와 시간 형식 처리, 문자 인코딩 처리 등 다양한 작업을 포함합니다.
   즉, 프록시 트랜스코딩은 웹 콘텐츠의 형태나 크기를 조절하여 사용자에게 최적의 경험을 제공하는 반면, 국제화(i18n)은 소프트웨어가 전 세계 어디서든 올바르게 작동하도록 만드는 것이 주 목적입니다.

그러므로 프록시 트랜스코딩과 i18n 사이에 직접적인 관계가 있는 것은 아니며, 각각 다른 문맥에서 웹 콘텐츠 및 소프트웨어 최적화를 위해 사용됩니다.

### 인터넷 피어링

인터넷 피어링(Peering)은 두 개 이상의 인터넷 네트워크가 서로 직접적으로 트래픽을 교환하기 위해 연결되는 관계를 의미합니다. 이를 통해 데이터 패킷들은 더 짧은 경로를 거쳐 목적지에 도달하게 되므로, 지연 시간이 줄어들고 전송 속도가 개선됩니다.

## 궁금한 점

152페이지 그림 6-5 바이러스가 방화벽 및 방화벽 프락시를 뚫고 서버쪽에 있는 이유?
